
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../orm-introduction/">
      
      
        <link rel="next" href="../relationships/">
      
      
      <link rel="icon" href="../_media/logo.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Models - Lightpack</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Lightpack" class="md-header__button md-logo" aria-label="Lightpack" data-md-component="logo">
      
  <img src="../_media/logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lightpack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Models
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lightpack/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    lightpack/docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Lightpack" class="md-nav__button md-logo" aria-label="Lightpack" data-md-component="logo">
      
  <img src="../_media/logo-white.svg" alt="logo">

    </a>
    Lightpack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lightpack/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    lightpack/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Install
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Basics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controllers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../views/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Views
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../request/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Request
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Response
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sessions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cookies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filesystem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../moment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Date & Time
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utility-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utility Functions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Databases
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Databases
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db-connection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db-query-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query Builder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seeder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seeder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Factory
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Lucid ORM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Lucid ORM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../orm-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-to-orm-models" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction to ORM Models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-model" class="md-nav__link">
    <span class="md-ellipsis">
      Defining Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performing-crud" class="md-nav__link">
    <span class="md-ellipsis">
      Performing CRUD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performing CRUD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      Create
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#last-insert-id" class="md-nav__link">
    <span class="md-ellipsis">
      Last Insert ID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-primary-key" class="md-nav__link">
    <span class="md-ellipsis">
      Manual Primary Key
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#read" class="md-nav__link">
    <span class="md-ellipsis">
      Read
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    <span class="md-ellipsis">
      Update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      Delete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timestamps" class="md-nav__link">
    <span class="md-ellipsis">
      Timestamps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#refetch" class="md-nav__link">
    <span class="md-ellipsis">
      Refetch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-casting" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute Casting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attribute Casting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-cast-types" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Cast Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Example Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-casting-works" class="md-nav__link">
    <span class="md-ellipsis">
      How Casting Works
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-pitfalls" class="md-nav__link">
    <span class="md-ellipsis">
      Common Pitfalls
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloning-a-model" class="md-nav__link">
    <span class="md-ellipsis">
      Cloning a Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tracking-unsaved-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Tracking Unsaved Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tracking Unsaved Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-is-this-useful" class="md-nav__link">
    <span class="md-ellipsis">
      Why is this useful?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use" class="md-nav__link">
    <span class="md-ellipsis">
      How to use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typical-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Typical scenarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-send-email-verification-when-email-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Send Email Verification When Email Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-builders" class="md-nav__link">
    <span class="md-ellipsis">
      Query Builders
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Query Filters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query Filters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-filter-scopes" class="md-nav__link">
    <span class="md-ellipsis">
      Defining Filter Scopes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Using Filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-hint-scope-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Type hint scope parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Global Scope
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Global Scope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-a-global-scope" class="md-nav__link">
    <span class="md-ellipsis">
      What is a Global Scope?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-define-a-global-scope" class="md-nav__link">
    <span class="md-ellipsis">
      How to Define a Global Scope
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-is-this-powerful" class="md-nav__link">
    <span class="md-ellipsis">
      Why is this Powerful?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-example" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      Model Hooks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model Hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-hook-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Available Hook Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-and-why-to-use-hooks" class="md-nav__link">
    <span class="md-ellipsis">
      How and Why to Use Hooks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#practical-examples-for-each-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Practical Examples for Each Hook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforeinsert" class="md-nav__link">
    <span class="md-ellipsis">
      beforeInsert()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterinsert" class="md-nav__link">
    <span class="md-ellipsis">
      afterInsert()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforeupdate" class="md-nav__link">
    <span class="md-ellipsis">
      beforeUpdate()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterupdate" class="md-nav__link">
    <span class="md-ellipsis">
      afterUpdate()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforedelete" class="md-nav__link">
    <span class="md-ellipsis">
      beforeDelete()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#afterdelete" class="md-nav__link">
    <span class="md-ellipsis">
      afterDelete()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-realistic-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      More Realistic Scenarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-gotchas" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices &amp; Gotchas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cast-into-array" class="md-nav__link">
    <span class="md-ellipsis">
      Cast Into Array
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hidden-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Hidden Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hidden Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-hide-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Why Hide Attributes?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-use_1" class="md-nav__link">
    <span class="md-ellipsis">
      How to Use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices_1" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Relationships
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eager-loading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eager Loading
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Collections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Authentication
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-access-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Access Tokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth-filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Route Filters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../password/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Password
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../encryption-decryption-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crypto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../url/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    URL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rate-limiter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rate Limit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mutex-lock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mutex Lock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../array-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Array
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../string-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    String
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../otp-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OTP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asset-loading-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../js-utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PHP to JS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mails/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mails
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../queue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Schedule
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caching
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Providers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CORS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../console/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Console
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secrets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../taxonomies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Taxonomies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../audit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rbac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RBAC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../captcha/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Captcha
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../webhook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Webhook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uploads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uploads
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../social-auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Social Auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SMS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mfa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MFA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h1>
<p><img alt="ORM Model Overview" src="../_media/orm/orm-model-overview.svg" /></p>
<h2 id="introduction-to-orm-models">Introduction to ORM Models<a class="headerlink" href="#introduction-to-orm-models" title="Permanent link">&para;</a></h2>
<p>Lightpack ORM is an <strong>Active Record</strong> pattern implementation. Each model is a class directly corresponds to a single table in your database, and each instance of a model represents a single row within that table. The model not only holds data, but also encapsulates all the logic required to create, read, update, and delete (CRUD) records.</p>
<p><strong>Key Fundamentals of Active Record:</strong>
- <strong>Class-to-Table Mapping:</strong> Each model class maps to a database table. For example, a <code>User</code> model maps to a <code>users</code> table.
- <strong>Object-to-Row Mapping:</strong> Each model instance represents a row in the corresponding table.
- <strong>CRUD Operations:</strong> Models provide methods to perform CRUD operations directly, such as <code>save()</code>, <code>find()</code>, <code>update()</code>, and <code>delete()</code>, without needing to write SQL manually.</p>
<p>The following sections will explore how to define models, establish relationships, and utilize the full capabilities of the ORM system.</p>
<hr />
<p>Consider that you have a <code>products</code> table in your database.</p>
<pre><code class="language-table">Table: products
-------------------------------------------------
id, name, size, color, status
-------------------------------------------------
</code></pre>
<p>Then you should define a <code>Product</code> model in <code>app/Models</code> folder.</p>
<h2 id="defining-model">Defining Model<a class="headerlink" href="#defining-model" title="Permanent link">&para;</a></h2>
<p>Fire this command to generate a model from your terminal inside your project root.</p>
<pre><code class="language-terminal">php console create:model Product --table=products
</code></pre>
<p>This should have created <code>Product</code> model in <code>app/Models</code> folder.</p>
<pre><code class="language-php">class Product extends Model
{
    protected $table = 'products';

    protected $primaryKey = 'id';

    protected $timestamps = false;
}
</code></pre>
<p>Defining your model in this manner gives you access to a number of utility
methods to deal with records in your <code>products</code> table.</p>
<h2 id="performing-crud">Performing CRUD<a class="headerlink" href="#performing-crud" title="Permanent link">&para;</a></h2>
<p>Once the model class is defined, performing <strong>CRUD</strong> operations per single database record becomes very easy. You do not need to manually wire-up raw SQL queries for:</p>
<ul>
<li><strong>(C)</strong> creating a new record, </li>
<li><strong>(R)</strong> reading an existing record, </li>
<li><strong>(U)</strong> update an existing record, </li>
<li><strong>(D)</strong> or delete an existing record.</li>
</ul>
<h3 id="create">Create<a class="headerlink" href="#create" title="Permanent link">&para;</a></h3>
<p>Set properties on your new model and simply call the inherited method <code>insert()</code> to insert a new record.</p>
<pre><code class="language-php">// Create the instance
$product = new Product;

// Set product properties
$product-&gt;name = 'ACME Shoes';
$product-&gt;size = 10;
$product-&gt;color = 'black'

// Create new product
$product-&gt;insert();
</code></pre>
<h4 id="last-insert-id">Last Insert ID<a class="headerlink" href="#last-insert-id" title="Permanent link">&para;</a></h4>
<p>If your table's primary key is an <strong>auto-incrementing</strong> field, you can get the last insert id:</p>
<pre><code class="language-php">$product-&gt;lastInsertId();
</code></pre>
<h4 id="manual-primary-key">Manual Primary Key<a class="headerlink" href="#manual-primary-key" title="Permanent link">&para;</a></h4>
<p>If your table's primary key is a <strong>non auto-incrementing</strong> field, you must override the inherited model attribute <code>autoIncrements</code> to false.</p>
<pre><code class="language-php">class Product extends Model
{
    protected $autoIncrements = false;
}
</code></pre>
<p>Now when calling <code>insert()</code> method, you must pass a unique primary key value for the new record to be created.</p>
<pre><code class="language-php">// Create the instance
$product = new Product;

// Set product properties
$product-&gt;id = 'sku1000';
$product-&gt;name = 'ACME Shoes';
$product-&gt;size = 10;
$product-&gt;color = 'black'

// Create new product
$product-&gt;insert();
</code></pre>
<h3 id="read">Read<a class="headerlink" href="#read" title="Permanent link">&para;</a></h3>
<p>You can easily fetch a record by its <strong>ID</strong> when constructing the model. </p>
<pre><code class="language-php">$product = new Product(23);
</code></pre>
<p>Now you can access the column values as model properties.</p>
<pre><code class="language-php">echo $product-&gt;title;
echo $product-&gt;size;
echo $product-&gt;color;
</code></pre>
<h3 id="update">Update<a class="headerlink" href="#update" title="Permanent link">&para;</a></h3>
<p>Use the <code>update()</code> method to update an existing record in the database table. You first need to instantiate the model using the primary key of the table.</p>
<pre><code class="language-php">// Get an existing product having id: 23
$product = new Product(23);

// Set product properties to update
$product-&gt;name = 'ACME Footwear';
$product-&gt;size = 11;
$product-&gt;color = 'brown'

// Update the product
$product-&gt;update();
</code></pre>
<h3 id="delete">Delete<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h3>
<p>Simply call the <code>delete()</code> passing it the id of the record to be deleted from database.</p>
<pre><code class="language-php">(new Product)-&gt;delete(23);
</code></pre>
<p>If you already have an existing instance of model, you can call <code>delete()</code> method there too.</p>
<pre><code class="language-php">$product = new Product(23);
$product-&gt;delete(); // passing id not required
</code></pre>
<h2 id="timestamps">Timestamps<a class="headerlink" href="#timestamps" title="Permanent link">&para;</a></h2>
<p>Consider <strong>products</strong> table:</p>
<pre><code class="language-table">Table: products
-------------------------------------------------
id, name, price, created_at, updated_at
-------------------------------------------------
</code></pre>
<p>Setting <code>$timestamps</code> property to <code>true</code> automatically sets values for <strong>created_at</strong> and <strong>updated_at</strong> columns in your table. So
when you create a new product or update an existing product, you don't have to manually set values for these columns.</p>
<p class="tip">In order for timestamps to work, the table must have <b>created_at</b> and <b>updated_at</b> columns both.</p>

<h2 id="refetch">Refetch<a class="headerlink" href="#refetch" title="Permanent link">&para;</a></h2>
<p>Sometimes, the data in your existing model instance can become outdated—especially if changes are made to the database from somewhere else in your application. </p>
<p>For an example, consider the scenario where the <code>timestamps</code> attribute in model class definition is set to <strong>true</strong>.</p>
<pre><code class="language-php">class Product extends Model
{
    protected $timestamps = true;
}
</code></pre>
<p>In such case, performing an <code>insert()</code> or <code>update()</code> automatically sets <strong>created_at</strong> and <strong>updated_at</strong> columns. This happens as a side-effect of the framework's ORM implementation as convinience. </p>
<pre><code class="language-php">/**
 * created_at, updated_at column is set automatically
 */
$product-&gt;insert(); 
</code></pre>
<p>Now if you try this:</p>
<pre><code class="language-php">echo $product-&gt;created_at; // null
echo $product-&gt;updated_at; // null
</code></pre>
<p>To ensure you are working with the latest data for the current record from the database, you can call <code>refetch()</code> method.</p>
<pre><code class="language-php">$product = $product-&gt;refetch();
</code></pre>
<p><code>$product</code> will contain the latest data. If the record was deleted or the primary key isn’t set, it will return <code>null</code>.</p>
<h2 id="attribute-casting">Attribute Casting<a class="headerlink" href="#attribute-casting" title="Permanent link">&para;</a></h2>
<p>Attribute casting converts model attributes to a specific type (like integer, boolean, array, or date) when you access them, and back to a database-friendly format when you save them.</p>
<h3 id="supported-cast-types">Supported Cast Types<a class="headerlink" href="#supported-cast-types" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Cast Type</th>
<th>Description &amp; Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code> / <code>integer</code></td>
<td>Converts to integer: <code>'123'</code> → <code>123</code></td>
</tr>
<tr>
<td><code>float</code> / <code>double</code></td>
<td>Converts to float: <code>'123.45'</code> → <code>123.45</code></td>
</tr>
<tr>
<td><code>string</code></td>
<td>Converts to string: <code>123</code> → <code>'123'</code></td>
</tr>
<tr>
<td><code>bool</code> / <code>boolean</code></td>
<td>Converts to boolean: <code>'1'</code>, <code>1</code>, <code>'true'</code> → <code>true</code></td>
</tr>
<tr>
<td><code>array</code> / <code>json</code></td>
<td>Converts JSON string to array and vice versa</td>
</tr>
<tr>
<td><code>date</code></td>
<td>Converts to <code>Y-m-d</code> string or from <code>DateTime</code></td>
</tr>
<tr>
<td><code>datetime</code></td>
<td>Converts to <code>DateTime</code> object or from string</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td>Converts to Unix timestamp (int or string)</td>
</tr>
</tbody>
</table>
<h3 id="example-usage">Example Usage<a class="headerlink" href="#example-usage" title="Permanent link">&para;</a></h3>
<p>Suppose your <code>User</code> model has a <code>settings</code> column that stores JSON, and a <code>created_at</code> column for timestamps. You can define casts like this:</p>
<pre><code class="language-php">class User extends Model
{
    protected $casts = [
        'settings'   =&gt; 'array',
        'created_at' =&gt; 'datetime',
        'active'     =&gt; 'bool',
        'score'      =&gt; 'int',
    ];
}
</code></pre>
<p>Now, whenever you access <code>$user-&gt;settings</code>, you’ll get an array. <code>$user-&gt;created_at</code> will be a <code>DateTime</code> object, and so on.</p>
<h3 id="how-casting-works">How Casting Works<a class="headerlink" href="#how-casting-works" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>On retrieval:</strong> The value is converted to the specified type automatically.</li>
<li><strong>On save:</strong> The value is converted back (uncast) to a database-friendly format.</li>
<li><strong>Null values:</strong> Always remain <code>null</code>—no conversion is performed.</li>
<li><strong>Unknown types:</strong> The value is returned as-is.</li>
</ul>
<h3 id="common-pitfalls">Common Pitfalls<a class="headerlink" href="#common-pitfalls" title="Permanent link">&para;</a></h3>
<ul>
<li>Make sure your database column type matches the cast (e.g., don’t cast a string column as an array unless it stores JSON).</li>
<li>Invalid input (like malformed JSON or dates) will throw exceptions—handle these in your code if needed.</li>
</ul>
<hr />
<h2 id="cloning-a-model">Cloning a Model<a class="headerlink" href="#cloning-a-model" title="Permanent link">&para;</a></h2>
<p>There may be times when you want to create a new record in your database that’s almost identical to an existing one—without re-entering all the data. The <code>clone</code> method makes this easy: it creates a new model instance with the same attribute values as the original, but leaves out the primary key and timestamps, so you can safely save it as a new record.</p>
<p>This is especially useful for duplicating templates, copying products, or quickly creating similar entries.</p>
<p><strong>How it works:</strong><br />
- The new instance copies all attributes from the original, except for the primary key (<code>id</code>), <code>created_at</code>, and <code>updated_at</code> fields.
- You can also specify additional fields to exclude if needed.
- You can only clone an existing record (one that already exists in the database).</p>
<p><strong>Example:</strong><br />
Let’s say you want to duplicate a product but change its name:</p>
<pre><code class="language-php">$original = new Product(23); // Load an existing product
$copy = $original-&gt;clone();  // Create a new instance with the same data

$copy-&gt;name = 'New Product Name';
$copy-&gt;insert(); // Save as a new product in the database
</code></pre>
<p>If you want to exclude more fields from being copied, just pass them as an array:</p>
<pre><code class="language-php">$copy = $original-&gt;clone(['description', 'price']);
</code></pre>
<p>If you try to clone a model that doesn’t exist in the database, you’ll get an error.</p>
<h2 id="tracking-unsaved-changes">Tracking Unsaved Changes<a class="headerlink" href="#tracking-unsaved-changes" title="Permanent link">&para;</a></h2>
<p>When working with models, you may want to know if you’ve made changes that haven’t been saved to the database yet. Lightpack models make this easy with two helpful methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>What it does</th>
<th>Example Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>isDirty()</td>
<td>Checks if the model (or a specific field) has unsaved changes</td>
<td>true / false</td>
</tr>
<tr>
<td>getDirty()</td>
<td>Lists all fields that have unsaved changes</td>
<td>['name', 'email']</td>
</tr>
</tbody>
</table>
<h3 id="why-is-this-useful">Why is this useful?<a class="headerlink" href="#why-is-this-useful" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Save only when needed:</strong> Avoid unnecessary database writes by saving only if something has changed.</li>
<li><strong>User feedback:</strong> Warn users if they try to leave a page with unsaved changes.</li>
<li><strong>Debugging:</strong> See exactly what’s different before saving.</li>
</ul>
<h3 id="how-to-use">How to use<a class="headerlink" href="#how-to-use" title="Permanent link">&para;</a></h3>
<p><strong>Check if anything changed:</strong></p>
<pre><code class="language-php">$user = User::find(1);
$user-&gt;name = 'New Name';

if ($user-&gt;isDirty()) {
    // There are unsaved changes
}
</code></pre>
<p><strong>Check if a specific field changed:</strong></p>
<pre><code class="language-php">if ($user-&gt;isDirty('name')) {
    // The 'name' field was modified
}
</code></pre>
<p><strong>See which fields changed:</strong></p>
<pre><code class="language-php">$dirty = $user-&gt;getDirty(); // e.g., ['name', 'email']
</code></pre>
<h3 id="typical-scenarios">Typical scenarios<a class="headerlink" href="#typical-scenarios" title="Permanent link">&para;</a></h3>
<ul>
<li>Prevent saving when nothing has changed.</li>
<li>Warn users before they leave a form with unsaved edits.</li>
<li>Highlight changed fields in a review step.</li>
</ul>
<h3 id="example-send-email-verification-when-email-changes">Example: Send Email Verification When Email Changes<a class="headerlink" href="#example-send-email-verification-when-email-changes" title="Permanent link">&para;</a></h3>
<p>Suppose you want to automatically send an email verification request whenever a user updates their profile and changes their email address. With <code>isDirty('email')</code>, you can easily detect this:</p>
<pre><code class="language-php">$user = new User(23);
$user-&gt;name = 'John Doe';

if ($user-&gt;isDirty('email')) { // false
    $user-&gt;email_verified_at = null;
}

// Update user changes
$user-&gt;update();

if($user-&gt;email_verified_at == null) {
    // send verification mail
}
</code></pre>
<p>In above example, only user's name was changed, so before saving the profile, <code>$user-&gt;isDirty('email')</code> check will be false.This way, you only send the verification request if the email was actually updated—no need to compare values manually!</p>
<blockquote>
<p>Once the <code>insert()</code> or <code>update()</code> method is called on the model instance, the ORM clears all the dirty attributes. So <code>isDirty()</code> method returns <strong>false</strong> and <code>getDirty()</code> method returns <strong>empty</strong> array after model persistence.</p>
</blockquote>
<h2 id="query-builders">Query Builders<a class="headerlink" href="#query-builders" title="Permanent link">&para;</a></h2>
<p><strong>Lightpack</strong> models are capable <a href="/db-query-builder">query builders</a> too. </p>
<p>To get a query builder on a model, call the static method <code>query()</code>:</p>
<pre><code class="language-php">$productQuery = Product::query();
</code></pre>
<p>Now you can access all the methods on <a href="/query-builder">query builders</a>. Below are some example for using query builder on a model.</p>
<p><strong>Fetch all products</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;all();
</code></pre>
<p><strong>Fetch all active products</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;where('active', '=', '1')-&gt;all();
</code></pre>
<p><strong>Fetch products with matching ids</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;whereIn('id', [1,2,3])-&gt;all();
</code></pre>
<p><strong>Fetch all products with at least one order</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders')-&gt;all();
</code></pre>
<p>The above is same as:</p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders', '&gt;', 0)-&gt;all();
// or
$products = Product::query()-&gt;has('orders', '&gt;=', 1)-&gt;all();
</code></pre>
<p><strong>Fetch products with no orders</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders', '=', 0)-&gt;all();
</code></pre>
<p><strong>Fetch products with at least 2 orders</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders', '&gt;', 1)-&gt;all();
// or
$products = Product::query()-&gt;has('orders', '&gt;=', 2)-&gt;all();
</code></pre>
<p><strong>Fetch products with atmost 2 orders</strong></p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders', '&lt;', 3)-&gt;all();
// or
$products = Product::query()-&gt;has('orders', '&lt;=', 2)-&gt;all();
</code></pre>
<p><strong>Callbacks as query constraints</strong></p>
<p>You can even pass a callback as <strong>4th</strong> parameter to <code>has()</code> method to add more constraints on relationship. For example, suppose you want to fetch <strong>products</strong> with atleast <strong>2 paid orders</strong>.</p>
<pre><code class="language-php">$products = Product::query()-&gt;has('orders', '&gt;=', 2, function($q) {
    $q-&gt;where('paid', '=', true);
});
</code></pre>
<h2 id="query-filters">Query Filters<a class="headerlink" href="#query-filters" title="Permanent link">&para;</a></h2>
<p>Query filters provide a clean way to filter database records using model scopes. They allow you to encapsulate common query constraints and apply them dynamically.</p>
<h3 id="defining-filter-scopes">Defining Filter Scopes<a class="headerlink" href="#defining-filter-scopes" title="Permanent link">&para;</a></h3>
<p>Create filter scopes by adding methods prefixed with <code>scope</code> to your model:</p>
<pre><code class="language-php">use Lightpack\Database\Lucid\Model;

class User extends Model
{
    protected $table = 'users';

    protected function scopeStatus($query, $value)
    {
        $query-&gt;where('status', $value);
    }

    protected function scopeType($query, $value)
    {
        $query-&gt;where('type', $value);
    }

    protected function scopeRole($query, $value)
    {
        $query-&gt;where('role', $value);
    }

    protected function scopeSearch($query, $value)
    {
        $query-&gt;where('name', 'LIKE', &quot;%{$value}%&quot;);
    }
}
</code></pre>
<h3 id="using-filters">Using Filters<a class="headerlink" href="#using-filters" title="Permanent link">&para;</a></h3>
<p>Apply filters using the static <code>filters()</code> method:</p>
<pre><code class="language-php">// Fetch all users
$users = User::filters(['status' =&gt; 'active'])-&gt;all();

// Fetch active users
$users = User::filters(['status' =&gt; 'active'])-&gt;all();

// Combine multiple filters
$users = User::filters([
    'status' =&gt; 'active',
    'role' =&gt; 'admin',
    'search' =&gt; 'john'
])-&gt;all();
</code></pre>
<h3 id="type-hint-scope-parameters">Type hint scope parameters<a class="headerlink" href="#type-hint-scope-parameters" title="Permanent link">&para;</a></h3>
<p>You can type hint <code>$query</code> and <code>$value</code> parameters for better code clarity:</p>
<pre><code class="language-php">class User extends Model
{
    protected function scopeTags(Query $query, array|string $value)
    {
        if (is_string($value)) {
            $value = explode(',', $value);
        }
        $query-&gt;whereIn('tag', $value);
    }
}
</code></pre>
<pre><code class="language-php">// Usage
$users = User::filters([
    'tags' =&gt; 'php,mysql,redis'
])-&gt;all();
</code></pre>
<pre><code class="language-php">// Or with array
$users = User::filters([
    'tags' =&gt; ['php', 'mysql', 'redis']
])-&gt;all();
</code></pre>
<h2 id="global-scope">Global Scope<a class="headerlink" href="#global-scope" title="Permanent link">&para;</a></h2>
<p>Global scopes let you automatically apply common query conditions to all queries on a model—ensuring consistent, safe, and DRY data access. This is especially powerful for multi-tenant applications, or any scenario where you want to transparently filter data for all operations.</p>
<h3 id="what-is-a-global-scope">What is a Global Scope?<a class="headerlink" href="#what-is-a-global-scope" title="Permanent link">&para;</a></h3>
<p>A global scope is a rule that is always applied to every query for a model, whether you’re fetching, updating, deleting, or counting records. This helps prevent accidental data leaks and reduces repetitive code.</p>
<h3 id="how-to-define-a-global-scope">How to Define a Global Scope<a class="headerlink" href="#how-to-define-a-global-scope" title="Permanent link">&para;</a></h3>
<p>To add a global scope, override the inherited method <code>globalScope()</code> in your model. Any conditions you add to the <code>$query</code> will be automatically included in all queries for that model.</p>
<p><strong>Example: Restricting by Tenant</strong></p>
<pre><code class="language-php">class TenantModel extends Model
{
    public function globalScope(Query $query)
    {
        // Only show records for tenant_id = 1
        $query-&gt;where('tenant_id', 1);
    }
}
</code></pre>
<p>Now, any model inheriting from <code>TenantModel</code> will always include <code>WHERE tenant_id = 1</code> in its queries—no matter what operation you perform.</p>
<h3 id="why-is-this-powerful">Why is this Powerful?<a class="headerlink" href="#why-is-this-powerful" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Security:</strong> Prevents users from accessing data outside their tenant.</li>
<li><strong>Consistency:</strong> No risk of forgetting to add the filter in a query.</li>
<li><strong>Simplicity:</strong> Write your code as if you’re working with a single-tenant table.</li>
</ul>
<h3 id="real-world-example">Real-World Example<a class="headerlink" href="#real-world-example" title="Permanent link">&para;</a></h3>
<p>Suppose you have a <code>users</code> table with a <code>tenant_id</code> column. By using a global scope, you can ensure that all queries only affect users belonging to the current tenant:</p>
<pre><code class="language-php">class User extends TenantModel
{
    protected $table = 'users';
}
</code></pre>
<p>Now, all of these will only affect tenant 1:</p>
<pre><code class="language-php">User::query()-&gt;all();
User::query()-&gt;count();
User::query()-&gt;where('active', 1)-&gt;all();
User::query()-&gt;delete();
User::query()-&gt;update(['active' =&gt; 0]);
</code></pre>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h3>
<ul>
<li>Define global scopes for any rule that should always apply (tenancy, soft deletes, published status).</li>
<li>Be careful: global scopes apply to <strong>all</strong> queries, including destructive ones like <code>delete()</code> and <code>update()</code>.</li>
</ul>
<hr />
<h2 id="model-hooks">Model Hooks<a class="headerlink" href="#model-hooks" title="Permanent link">&para;</a></h2>
<p>Lightpack Lucid models provide a set of protected lifecycle hook methods that allow you to inject custom logic before and after key persistence operations—<strong>without global events, observers, or magic</strong>. These hooks allow to extend model behavior making your code organized and discoverable</p>
<h3 id="available-hook-methods">Available Hook Methods<a class="headerlink" href="#available-hook-methods" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Hook</th>
<th>When is it called?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>beforeInsert()</code></td>
<td>Before <code>insert()</code></td>
</tr>
<tr>
<td><code>afterInsert()</code></td>
<td>After <code>insert()</code></td>
</tr>
<tr>
<td><code>beforeUpdate()</code></td>
<td>Before <code>update()</code></td>
</tr>
<tr>
<td><code>afterUpdate()</code></td>
<td>After <code>update()</code></td>
</tr>
<tr>
<td><code>beforeDelete()</code></td>
<td>Before <code>delete()</code></td>
</tr>
<tr>
<td><code>afterDelete()</code></td>
<td>After <code>delete()</code></td>
</tr>
</tbody>
</table>
<hr />
<h3 id="how-and-why-to-use-hooks">How and Why to Use Hooks<a class="headerlink" href="#how-and-why-to-use-hooks" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Validation:</strong> Enforce business rules before DB changes</li>
<li><strong>Mutation:</strong> Mutate/transform data (e.g., hash, normalize)</li>
<li><strong>Side Effects:</strong> Trigger actions after DB changes (e.g., notifications, cache)</li>
<li><strong>Prevention:</strong> Abort operation by throwing exceptions</li>
<li><strong>Audit/Logging:</strong> Record changes or actions</li>
</ul>
<hr />
<h3 id="practical-examples-for-each-hook">Practical Examples for Each Hook<a class="headerlink" href="#practical-examples-for-each-hook" title="Permanent link">&para;</a></h3>
<h3 id="beforeinsert">beforeInsert()<a class="headerlink" href="#beforeinsert" title="Permanent link">&para;</a></h3>
<p>Called before inserting a new record:</p>
<pre><code class="language-php">protected function beforeInsert()
{
    // Example: Hash password before storing
    if (!empty($this-&gt;password)) {
        $this-&gt;password = password_hash($this-&gt;password, PASSWORD_DEFAULT);
    }
    // Example: Set created_by
    $this-&gt;created_by = Auth::userId();
}
</code></pre>
<h3 id="afterinsert">afterInsert()<a class="headerlink" href="#afterinsert" title="Permanent link">&para;</a></h3>
<p>Called after inserting a new record:</p>
<pre><code class="language-php">protected function afterInsert()
{
    // Example: Send welcome email
    Mailer::sendWelcome($this-&gt;email);
    // Example: Log creation
    Audit::log('Created user: ' . $this-&gt;id);
}
</code></pre>
<h3 id="beforeupdate">beforeUpdate()<a class="headerlink" href="#beforeupdate" title="Permanent link">&para;</a></h3>
<p>Called before updating an existing record:</p>
<pre><code class="language-php">protected function beforeUpdate()
{
    // Example: Prevent email change
    if ($this-&gt;isDirty('email')) {
        throw new \RuntimeException('Email cannot be changed.');
    }
    // Example: Update audit fields
    $this-&gt;updated_by = Auth::userId();
}
</code></pre>
<h3 id="afterupdate">afterUpdate()<a class="headerlink" href="#afterupdate" title="Permanent link">&para;</a></h3>
<p>Called after updating an existing record:</p>
<pre><code class="language-php">protected function afterUpdate()
{
    // Example: Invalidate related cache
    Cache::forget('user_' . $this-&gt;id);
    // Example: Notify admin
    Notification::admin('User updated: ' . $this-&gt;id);
}
</code></pre>
<h3 id="beforedelete">beforeDelete()<a class="headerlink" href="#beforedelete" title="Permanent link">&para;</a></h3>
<p>Called before deleting a record:</p>
<pre><code class="language-php">protected function beforeDelete()
{
    // Example: Prevent deletion if related orders exist
    if ($this-&gt;orders()-&gt;count() &gt; 0) {
        throw new \RuntimeException('Cannot delete user with orders.');
    }
    // Example: Archive data
    ArchiveService::archive($this-&gt;toArray());
}
</code></pre>
<h3 id="afterdelete">afterDelete()<a class="headerlink" href="#afterdelete" title="Permanent link">&para;</a></h3>
<p>Called after deleting a record:</p>
<pre><code class="language-php">protected function afterDelete()
{
    // Example: Remove from search index
    SearchIndex::remove('users', $this-&gt;id);
    // Example: Log deletion
    Audit::log('Deleted user: ' . $this-&gt;id);
}
</code></pre>
<hr />
<h3 id="more-realistic-scenarios">More Realistic Scenarios<a class="headerlink" href="#more-realistic-scenarios" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>beforeInsert:</strong> Generate a UUID PK for non-auto-increment models</li>
<li><strong>beforeUpdate:</strong> Prevent updates to immutable fields (e.g., SSN)</li>
<li><strong>afterInsert:</strong> Trigger onboarding workflow</li>
<li><strong>afterUpdate:</strong> Sync changes to external APIs</li>
<li><strong>beforeDelete:</strong> Clean up dependent child records (manual cascade)</li>
<li><strong>afterDelete:</strong> Notify other systems of deletion</li>
</ul>
<hr />
<h3 id="best-practices-gotchas">Best Practices &amp; Gotchas<a class="headerlink" href="#best-practices-gotchas" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Keep hooks focused:</strong> Only put logic relevant to that model and operation</li>
<li><strong>Throw exceptions to abort:</strong> Any exception will prevent the operation</li>
<li><strong>Avoid heavy side effects in hooks:</strong> For long-running tasks, consider queueing</li>
<li><strong>No global events:</strong> All logic must be per-model, explicit, and discoverable</li>
<li><strong>Avoid external dependencies if possible:</strong> Keep hooks self-contained</li>
</ul>
<hr />
<h2 id="cast-into-array">Cast Into Array<a class="headerlink" href="#cast-into-array" title="Permanent link">&para;</a></h2>
<p>To convert loaded models into <strong>array</strong>, use <code>toArray()</code> method.</p>
<pre><code class="language-php">$product = new Product(23);
$productArray = $product-&gt;toArray();
</code></pre>
<pre><code class="language-php">$products = Product::query()-&gt;limit(10)-&gt;all();
$productsArray = $products-&gt;toArray();
</code></pre>
<h2 id="hidden-attributes">Hidden Attributes<a class="headerlink" href="#hidden-attributes" title="Permanent link">&para;</a></h2>
<p>Sometimes, you don’t want certain model attributes to show up when converting your models to arrays or serializing them (for example, when returning JSON responses from an API). The <code>$hidden</code> property on your model lets you easily hide sensitive or irrelevant fields from output.</p>
<h3 id="why-hide-attributes">Why Hide Attributes?<a class="headerlink" href="#why-hide-attributes" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Security:</strong> Prevent leaking sensitive data (like passwords, tokens, internal IDs).</li>
<li><strong>Clean Output:</strong> Remove fields that aren’t needed by the client or API consumer.</li>
<li><strong>Consistency:</strong> Ensure only intended data is exposed in API responses or exports.</li>
</ul>
<h3 id="how-to-use_1">How to Use<a class="headerlink" href="#how-to-use_1" title="Permanent link">&para;</a></h3>
<p>Just define the <code>$hidden</code> property as an array of attribute names in your model:</p>
<pre><code class="language-php">class User extends Model
{
    protected $hidden = [
        'password',
        'remember_token',
        'internal_notes',
    ];
}
</code></pre>
<p>Now, when you call <code>toArray()</code> or serialize the model (e.g., for JSON), these fields will be automatically excluded:</p>
<pre><code class="language-php">$user = new User(23);
$userArray = $user-&gt;toArray();
// 'password', 'remember_token', and 'internal_notes' will NOT appear in $userArray
</code></pre>
<p>This also applies to collections:</p>
<pre><code class="language-php">$users = User::query()-&gt;all();
$usersArray = $users-&gt;toArray(); // All hidden fields are excluded for every user
</code></pre>
<h3 id="best-practices_1">Best Practices<a class="headerlink" href="#best-practices_1" title="Permanent link">&para;</a></h3>
<ul>
<li>Always hide sensitive fields like passwords and tokens.</li>
<li>Only include what’s necessary for your consumers—less is more.</li>
<li>Hidden attributes only affect serialization/array conversion—they are still accessible in your code.</li>
</ul>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "toc.integrate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>